<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="333px" preserveAspectRatio="none" style="width:594px;height:333px;" version="1.1" viewBox="0 0 594 333" width="594px" zoomAndPan="magnify"><defs><filter height="300%" id="fj6gz3wxraeub" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class Game--><rect fill="#FEFECE" filter="url(#fj6gz3wxraeub)" height="129.6328" id="Game" style="stroke: #A80036; stroke-width: 1.5;" width="336" x="6" y="8"/><ellipse cx="151.75" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M154.7188,29.6406 Q154.1406,29.9375 153.5,30.0859 Q152.8594,30.2344 152.1563,30.2344 Q149.6563,30.2344 148.3359,28.5859 Q147.0156,26.9375 147.0156,23.8125 Q147.0156,20.6875 148.3359,19.0313 Q149.6563,17.375 152.1563,17.375 Q152.8594,17.375 153.5078,17.5313 Q154.1563,17.6875 154.7188,17.9844 L154.7188,20.7031 Q154.0938,20.125 153.5,19.8516 Q152.9063,19.5781 152.2813,19.5781 Q150.9375,19.5781 150.25,20.6484 Q149.5625,21.7188 149.5625,23.8125 Q149.5625,25.9063 150.25,26.9766 Q150.9375,28.0469 152.2813,28.0469 Q152.9063,28.0469 153.5,27.7734 Q154.0938,27.5 154.7188,26.9219 L154.7188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="36" x="172.25" y="28.1543">Game</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="341" y1="40" y2="40"/><ellipse cx="17" cy="51.9023" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="26" y="54.2104">new()</text><ellipse cx="17" cy="64.707" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="26" y="67.0151">board() -&gt; Board</text><ellipse cx="17" cy="77.5117" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="26" y="79.8198">state() -&gt; State</text><ellipse cx="17" cy="90.3164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="26" y="92.6245">free_positions() -&gt; FreePositions</text><ellipse cx="17" cy="103.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="26" y="105.4292">can_move(Position) -&gt; bool</text><ellipse cx="17" cy="115.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="310" x="26" y="118.2339">do_move(Position) -&gt; Result&lt;State, InvalidMoveError&gt;</text><ellipse cx="17" cy="128.7305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="26" y="131.0386">start_next_game() -&gt; State</text><!--class State--><rect fill="#FEFECE" filter="url(#fj6gz3wxraeub)" height="124.8281" id="State" style="stroke: #A80036; stroke-width: 1.5;" width="194" x="30" y="198"/><ellipse cx="105.75" cy="214" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M109.8594,220 L102.1406,220 L102.1406,207.6094 L109.8594,207.6094 L109.8594,209.7656 L104.5938,209.7656 L104.5938,212.4375 L109.3594,212.4375 L109.3594,214.5938 L104.5938,214.5938 L104.5938,217.8438 L109.8594,217.8438 L109.8594,220 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="34" x="126.25" y="218.1543">State</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="31" x2="223" y1="230" y2="230"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="36" y="244.2104">PlayerXMove</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="36" y="257.0151">PlayerOMove</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="180" x="36" y="269.8198">PlayerXWin[HashSet&lt;Position&gt;]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="36" y="282.6245">PlayerOWin[HashSet&lt;Position&gt;]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="36" y="295.4292">CatsGame</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="31" x2="223" y1="302.0234" y2="302.0234"/><ellipse cx="41" cy="313.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="50" y="316.2339">is_game_over() -&gt; bool</text><!--class FreePositions--><rect fill="#FEFECE" filter="url(#fj6gz3wxraeub)" height="79.5469" id="FreePositions" style="stroke: #A80036; stroke-width: 1.5;" width="159" x="424.5" y="33"/><ellipse cx="458.4" cy="51.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M461.3688,57.6094 Q460.7906,57.9063 460.15,58.0547 Q459.5094,58.2031 458.8063,58.2031 Q456.3063,58.2031 454.9859,56.5547 Q453.6656,54.9063 453.6656,51.7813 Q453.6656,48.6563 454.9859,47 Q456.3063,45.3438 458.8063,45.3438 Q459.5094,45.3438 460.1578,45.5 Q460.8063,45.6563 461.3688,45.9531 L461.3688,48.6719 Q460.7438,48.0938 460.15,47.8203 Q459.5563,47.5469 458.9313,47.5469 Q457.5875,47.5469 456.9,48.6172 Q456.2125,49.6875 456.2125,51.7813 Q456.2125,53.875 456.9,54.9453 Q457.5875,56.0156 458.9313,56.0156 Q459.5563,56.0156 460.15,55.7422 Q460.7438,55.4688 461.3688,54.8906 L461.3688,57.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="62" x="488.1" y="49.1387">«Iterator»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="476.6" y="63.1074">FreePositions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="425.5" x2="582.5" y1="70.9375" y2="70.9375"/><ellipse cx="435.5" cy="82.8398" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="444.5" y="85.1479">Item: Position</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="425.5" x2="582.5" y1="91.7422" y2="91.7422"/><ellipse cx="435.5" cy="103.6445" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="444.5" y="105.9526">next() -&gt; Option&lt;Item&gt;</text><!--class InvalidMoveError--><rect fill="#FEFECE" filter="url(#fj6gz3wxraeub)" height="37.9375" id="InvalidMoveError" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="437" y="241.5"/><ellipse cx="452" cy="260.4688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M454.9688,266.1094 Q454.3906,266.4063 453.75,266.5547 Q453.1094,266.7031 452.4063,266.7031 Q449.9063,266.7031 448.5859,265.0547 Q447.2656,263.4063 447.2656,260.2813 Q447.2656,257.1563 448.5859,255.5 Q449.9063,253.8438 452.4063,253.8438 Q453.1094,253.8438 453.7578,254 Q454.4063,254.1563 454.9688,254.4531 L454.9688,257.1719 Q454.3438,256.5938 453.75,256.3203 Q453.1563,256.0469 452.5313,256.0469 Q451.1875,256.0469 450.5,257.1172 Q449.8125,258.1875 449.8125,260.2813 Q449.8125,262.375 450.5,263.4453 Q451.1875,264.5156 452.5313,264.5156 Q453.1563,264.5156 453.75,264.2422 Q454.3438,263.9688 454.9688,263.3906 L454.9688,266.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="494.5" y="257.6387">«Error»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102" x="466" y="271.6074">InvalidMoveError</text><!--class Board--><rect fill="#FEFECE" filter="url(#fj6gz3wxraeub)" height="32" id="Board" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="259.5" y="244.5"/><ellipse cx="274.5" cy="260.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M277.4688,266.1406 Q276.8906,266.4375 276.25,266.5859 Q275.6094,266.7344 274.9063,266.7344 Q272.4063,266.7344 271.0859,265.0859 Q269.7656,263.4375 269.7656,260.3125 Q269.7656,257.1875 271.0859,255.5313 Q272.4063,253.875 274.9063,253.875 Q275.6094,253.875 276.2578,254.0313 Q276.9063,254.1875 277.4688,254.4844 L277.4688,257.2031 Q276.8438,256.625 276.25,256.3516 Q275.6563,256.0781 275.0313,256.0781 Q273.6875,256.0781 273,257.1484 Q272.3125,258.2188 272.3125,260.3125 Q272.3125,262.4063 273,263.4766 Q273.6875,264.5469 275.0313,264.5469 Q275.6563,264.5469 276.25,264.2734 Q276.8438,264 277.4688,263.4219 L277.4688,266.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="288.5" y="264.6543">Board</text><!--link Game to Board--><path d="M222.843,149.3172 C245.335,184.461 269.9952,222.9925 283.573,244.2077 " fill="none" id="Game-Board" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="215.6334,138.0522,215.4986,145.262,222.102,148.1595,222.2368,140.9496,215.6334,138.0522" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Game to State--><path d="M154.4544,150.9745 C150.5444,166.573 146.484,182.7714 142.7231,197.775 " fill="none" id="Game-State" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="157.6936,138.0522,152.3547,142.8995,154.7758,149.6921,160.1146,144.8447,157.6936,138.0522" style="stroke: #A80036; stroke-width: 1.0;"/><!--link FreePositions to InvalidMoveError--><!--
@startuml
hide empty fields
hide empty methods

class Game {
    +new()
    +board() -> Board
    +state() -> State
    +free_positions() -> FreePositions
    +can_move(Position) -> bool
    +do_move(Position) -> Result<State, InvalidMoveError>
    +start_next_game() -> State
}

enum State {
    PlayerXMove
    PlayerOMove
    PlayerXWin[HashSet<Position>]
    PlayerOWin[HashSet<Position>]
    CatsGame

    +is_game_over() -> bool
}

class FreePositions << Iterator >> {
    +Item: Position
    +next() -> Option<Item>
}

class InvalidMoveError << Error >> {

}

Game *- - Board
Game *- - State
FreePositions - -[hidden] InvalidMoveError

@enduml

PlantUML version 1.2019.01(Sat Feb 09 07:32:04 PST 2019)
(LGPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_232-b09
Operating System: Linux
OS Version: 5.3.7-200.fc30.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>